<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <title>Android Object Animator &mdash; Zale - Zale's Blog 张乐博客 个人网站</title>

    <!-- Latest compiled and minified CSS -->
    

    
    <link rel="alternate" type="application/atom+xml" title="overtrue" href="/atom.xml">

    <link rel="apple-touch-icon-precomposed" href="/assets/images/apple-touch-icon-57x57-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/assets/images/apple-touch-icon-72x72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/assets/images/apple-touch-icon-114x114-precomposed.png">
    
    <meta property="og:title" content="Android Object Animator">
      
    <meta name="keywords" content="Zale, 张乐, blog, 博客, ZhangLe, 个人网站">
    <meta name="og:keywords" content="Zale, 张乐, blog, 博客, ZhangLe, 个人网站">
      
    <meta name="description" content="Object Animator">
    <meta name="og:description" content="Object Animator">
      
    
    
        
    
    <meta property="og:url" content="//articles/2015/08/Object-Animation.html">
    <meta property="og:site_name" content="zale.site">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="zh_CN" />
    
    <meta property="article:published_time" content="2015-08-18">
    

    <!-- Favicon Icon -->
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    <!-- 3rd party css -->


    <link rel="stylesheet" href="/bower_components/octicons/octicons/octicons.css">
    <link rel="stylesheet" href="/bower_components/Trip.js/dist/trip.min.css">
    <link rel="stylesheet" href="/bower_components/flag-icon-css/css/flag-icon.css" >
    <link rel="stylesheet" href="/bower_components/share.js/dist/css/share.min.css">
    <link rel="stylesheet" href="/bower_components/primer-css/css/primer.css">
    <link rel="stylesheet" href="/bower_components/primer-markdown/dist/user-content.min.css">

    <!-- custom css-->
    <link rel="stylesheet" href="/assets/css/components/collection.css">
    <link rel="stylesheet" href="/assets/css/components/repo-card.css">
    <link rel="stylesheet" href="/assets/css/sections/repo-list.css">
    <link rel="stylesheet" href="/assets/css/sections/mini-repo-list.css">
    <link rel="stylesheet" href="/assets/css/components/boxed-group.css">
    <link rel="stylesheet" href="/assets/css/globals/common.css">
    <link rel="stylesheet" href="/assets/css/posts/index.css">
    <link rel="stylesheet" href="/assets/css/pages/index.css">
    <link rel="stylesheet" href="/assets/css/pages/hover-min.css">
    <link rel="stylesheet" href="/assets/css/globals/prism.css">
    <link rel="stylesheet" href="/assets/css/globals/responsive.css">


    <!-- 3rd party scripts -->
    <script src="/bower_components/jquery/dist/jquery.min.js"></script>
    <script src="/bower_components/jquery-ui/jquery-ui.min.js"></script>
    <script src="/bower_components/Trip.js/dist/trip.min.js"></script>
    <script src="/bower_components/share.js/dist/js/share.min.js"></script>

    <!-- custom scripts-->
    <script src="/assets/js/index.js"></script>
    <script src="/assets/js/geopattern.js"></script>
    <script src="/assets/js/prism.js"></script>
    <script src="/assets/js/lunr.min.js"></script>
    <script src="/assets/js/search.js"></script>


    

</head>
<body class="">
    <header class="site-header" id="site-header-id">
        <div class="container">
            <h1><a href="/" title="Zale"><span class="octicon octicon-mark-github"></span> Zale</a></h1>
            <nav class="site-header-nav" role="navigation">
                
                <a href="/" class=" site-header-nav-item hvr-underline-from-center" target="" title="Home">Home</a>
                
                <a href="/categories" class=" site-header-nav-item hvr-underline-from-center" target="" title="Categories">Categories</a>
                
                <a href="/wiki" class=" site-header-nav-item hvr-underline-from-center" target="" title="Wiki">Wiki</a>
                
                <a href="/bookmark" class=" site-header-nav-item hvr-underline-from-center" target="" title="Bookmark">Bookmark</a>
                
                <a href="/open-source" class=" site-header-nav-item hvr-underline-from-center" target="" title="Open-source">Open-source</a>
                
                <a href="/about" class=" site-header-nav-item hvr-underline-from-center" target="" title="About">About</a>
                
            </nav>
        </div>
    </header>
    <!-- / header -->
    <section class="collection-head collection-head-scrolled geopattern" data-pattern-id="Android Object ">
    <div class="container">
        <div class="columns">
            <div class="column">
                <div class="collection-title">
                    <h1 class="collection-header">Android Object Animator</h1>
                    <div class="collection-info">
                        <span class="meta-info">
                            
                            
                                <span class="octicon octicon-calendar"></span> 2015/08/18
                            
                        </span>
                        
                          <span class="meta-info">
                            <span class="octicon octicon-file-directory"></span>
                            <a href="/categories#android" title="Android">Android</a>
                          </span>
                        
                        
                        <span class="meta-info">
                            <span class="octicon octicon-tag"></span>
                            
                            <a href="/tags#android" title="Android">Android</a>
                            
                        </span>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- / .banner -->
<section class="container content">
    <div class="columns">
        <div class="column three-fourths" >
            <article class="article-content markdown-body">
                <h2 id="object-animator">Object Animator</h2>

<h3 id="why-use-animator-instead-of-animation">Why use Animator instead of Animation?</h3>

<p>Animator is for <strong>Interactive animation</strong>. In general, we use animation like this:</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">TranslateAnimation</span> <span class="n">animation</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TranslateAnimation</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">200</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span> <span class="c1">// Change x from 0 to 200 animation.setDuration(1000); </span>
<span class="n">animation</span><span class="o">.</span><span class="na">setFillAfter</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span> <span class="c1">// View will stay in the position where animation finished. Not return back </span>
<span class="n">imageView</span><span class="o">.</span><span class="na">startAnimation</span><span class="o">(</span><span class="n">animation</span><span class="o">);</span>
</code></pre>
</div>

<p>But here if you add a onClick listener. You will find, clicParcelable-Interface.mdking on the new location where the view is located currently doesn’t work! But clicking on the previous location works?! Because Animation only <strong>redraws</strong> UI. But the response location won’t change. So it’s not fit with interactive animation.</p>

<p>So to make better interactive animation, we have now two animator after 3.0:</p>

<p><strong>ValueAnimator</strong></p>

<p>This class provides a simple timing engine for running animations which calculate animated values and set them on target objects. <strong>ValueAnimator itself does not act on any of properties nor provide any animation</strong>. It is just a single timing pulse that all animations use (You could also use it for other things). It runs in a custom handler to ensure that property changes happen on the UI thread.</p>

<p>By default, ValueAnimator uses non-linear time interpolation, via the AccelerateDecelerateInterpolator class, which accelerates into and decelerates out of an animation. This behavior can be changed by calling setInterpolator(TimeInterpolator).</p>

<p><strong>ObjectAnimator</strong></p>

<p>To animate a property of target object. <strong>It needs Get/Set functions for this property</strong>. More details, this subclass of ValueAnimator provides support for animating properties on target objects. The constructors of this class take parameters to define the target object that will be animated as well as the name of the property that will be animated. Appropriate set/get functions are then determined internally and the animation will call these functions as necessary to animate the property.</p>

<h3 id="how-to-use-objectanimator">How to use ObjectAnimator</h3>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">ImageView</span> <span class="n">im</span> <span class="o">=</span> <span class="o">(</span><span class="n">ImageView</span><span class="o">)</span> <span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">iamge</span><span class="o">);</span>

<span class="c1">// First parameter is the view to be animated. Second parameter is the name of property</span>
<span class="n">ObjectAnimator</span><span class="o">.</span><span class="na">ofFloat</span><span class="o">(</span><span class="n">im</span><span class="o">,</span> <span class="s">"translationX"</span><span class="o">,</span> <span class="mi">0</span><span class="n">F</span><span class="o">,</span> <span class="mi">200</span><span class="n">F</span><span class="o">).</span><span class="na">setDuration</span><span class="o">(</span><span class="mi">1000</span><span class="o">).</span><span class="na">start</span><span class="o">();</span> 
<span class="n">ObjectAnimator</span><span class="o">.</span><span class="na">ofFloat</span><span class="o">(</span><span class="n">im</span><span class="o">,</span> <span class="s">"translationY"</span><span class="o">,</span> <span class="mi">0</span><span class="n">f</span><span class="o">,</span> <span class="mi">200</span><span class="n">f</span><span class="o">).</span><span class="na">setDuration</span><span class="o">(</span><span class="mi">1000</span><span class="o">).</span><span class="na">start</span><span class="o">();</span>

<span class="n">ObjectAnimator</span><span class="o">.</span><span class="na">ofFloat</span><span class="o">(</span><span class="n">im</span><span class="o">,</span> <span class="s">"X"</span><span class="o">,</span> <span class="mi">0</span><span class="n">f</span><span class="o">,</span> <span class="mi">200</span><span class="n">f</span><span class="o">).</span><span class="na">setDuration</span><span class="o">(</span><span class="mi">1000</span><span class="o">).</span><span class="na">start</span><span class="o">();</span> 
<span class="n">ObjectAnimator</span><span class="o">.</span><span class="na">ofFloat</span><span class="o">(</span><span class="n">im</span><span class="o">,</span> <span class="s">"Y"</span><span class="o">,</span> <span class="mi">0</span><span class="n">f</span><span class="o">,</span> <span class="mi">200</span><span class="n">f</span><span class="o">).</span><span class="na">setDuration</span><span class="o">(</span><span class="mi">1000</span><span class="o">).</span><span class="na">start</span><span class="o">();</span>

<span class="n">ObjectAnimator</span><span class="o">.</span><span class="na">ofFloat</span><span class="o">(</span><span class="n">im</span><span class="o">,</span> <span class="s">"rotation"</span><span class="o">,</span> <span class="mi">0</span><span class="n">f</span><span class="o">,</span> <span class="mi">360</span><span class="n">f</span><span class="o">).</span><span class="na">setDuration</span><span class="o">(</span><span class="mi">1000</span><span class="o">).</span><span class="na">start</span><span class="o">();</span>
</code></pre>
</div>

<p>But you will see here, <strong>all actions run in the mean time beacasue start() is asynchronous</strong>. So here we could use PropertyValuesHolder and AnimatorSet to control animators to run.</p>

<h3 id="propertyvaluesholder">PropertyValuesHolder</h3>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">PropertyValuesHolder</span> <span class="n">p1</span> <span class="o">=</span> <span class="n">PropertyValuesHolder</span><span class="o">.</span><span class="na">ofFloat</span><span class="o">(</span><span class="s">"translationX"</span><span class="o">,</span> <span class="mi">0</span><span class="n">F</span><span class="o">,</span> <span class="mi">200</span><span class="n">F</span><span class="o">);</span> <span class="n">PropertyValuesHolder</span> <span class="n">p2</span> <span class="o">=</span> <span class="n">PropertyValuesHolder</span><span class="o">.</span><span class="na">ofFloat</span><span class="o">(</span><span class="s">"translationY"</span><span class="o">,</span> <span class="mi">0</span><span class="n">F</span><span class="o">,</span> <span class="mi">200</span><span class="n">F</span><span class="o">);</span> <span class="n">PropertyValuesHolder</span> <span class="n">p3</span> <span class="o">=</span> <span class="n">PropertyValuesHolder</span><span class="o">.</span><span class="na">ofFloat</span><span class="o">(</span><span class="s">"rotation"</span><span class="o">,</span> <span class="mi">0</span><span class="n">F</span><span class="o">,</span> <span class="mi">360</span><span class="n">F</span><span class="o">);</span> 

<span class="c1">// Run all the property values together </span>
<span class="n">ObjectAnimator</span><span class="o">.</span><span class="na">ofPropertyValuesHolder</span><span class="o">(</span><span class="n">im</span><span class="o">,</span> <span class="n">p1</span><span class="o">,</span> <span class="n">p2</span><span class="o">,</span> <span class="n">p3</span><span class="o">).</span><span class="na">setDuration</span><span class="o">(</span><span class="mi">1000</span><span class="o">).</span><span class="na">start</span><span class="o">();</span>
</code></pre>
</div>

<h3 id="animatorset">AnimatorSet</h3>

<p>AnimatorSet is more powful:</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">AnimatorSet</span> <span class="n">set</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AnimatorSet</span><span class="o">();</span> 
<span class="n">Animator</span> <span class="n">animator1</span> <span class="o">=</span> <span class="n">ObjectAnimator</span><span class="o">.</span><span class="na">ofFloat</span><span class="o">(</span><span class="n">im</span><span class="o">,</span> <span class="s">"translationX"</span><span class="o">,</span> <span class="mi">0</span><span class="n">F</span><span class="o">,</span> <span class="mi">200</span><span class="n">F</span><span class="o">);</span> 
<span class="n">Animator</span> <span class="n">animator2</span> <span class="o">=</span> <span class="n">ObjectAnimator</span><span class="o">.</span><span class="na">ofFloat</span><span class="o">(</span><span class="n">im</span><span class="o">,</span> <span class="s">"translationY"</span><span class="o">,</span> <span class="mi">0</span><span class="n">f</span><span class="o">,</span> <span class="mi">200</span><span class="n">f</span><span class="o">);</span> 
<span class="n">Animator</span> <span class="n">animator3</span> <span class="o">=</span> <span class="n">ObjectAnimator</span><span class="o">.</span><span class="na">ofFloat</span><span class="o">(</span><span class="n">im</span><span class="o">,</span> <span class="s">"rotation"</span><span class="o">,</span> <span class="mi">0</span><span class="n">f</span><span class="o">,</span> <span class="mi">360</span><span class="n">f</span><span class="o">);</span>

<span class="c1">// Run actions together</span>
<span class="n">set</span><span class="o">.</span><span class="na">playTogether</span><span class="o">(</span><span class="n">animator1</span><span class="o">,</span> <span class="n">animator2</span><span class="o">,</span> <span class="n">animator3</span><span class="o">).</span><span class="na">setDuration</span><span class="o">(</span><span class="mi">1000</span><span class="o">).</span><span class="na">start</span><span class="o">();</span>

<span class="c1">// Run actions one by one</span>
<span class="n">set</span><span class="o">.</span><span class="na">playSequentially</span><span class="o">(</span><span class="n">animator1</span><span class="o">,</span><span class="n">animator2</span><span class="o">,</span><span class="n">animator3</span><span class="o">).</span><span class="na">setDuration</span><span class="o">(</span><span class="mi">1000</span><span class="o">).</span><span class="na">start</span><span class="o">();</span>

<span class="c1">// Run 2 with 3 together</span>
<span class="n">set</span><span class="o">.</span><span class="na">play</span><span class="o">(</span><span class="n">animator2</span><span class="o">).</span><span class="na">with</span><span class="o">(</span><span class="n">animator3</span><span class="o">).</span><span class="na">setDuration</span><span class="o">(</span><span class="mi">1000</span><span class="o">).</span><span class="na">start</span><span class="o">();</span>

<span class="c1">// Run 1 after 3</span>
<span class="n">set</span><span class="o">.</span><span class="na">play</span><span class="o">(</span><span class="n">animator1</span><span class="o">).</span><span class="na">after</span><span class="o">(</span><span class="n">animator3</span><span class="o">).</span><span class="na">setDuration</span><span class="o">(</span><span class="mi">1000</span><span class="o">).</span><span class="na">start</span><span class="o">();</span>
</code></pre>
</div>

<h3 id="set-listener">Set Listener</h3>

<p>Two ways:
1. new Animator.AnimatorListener()
2. new AnimatorListenerAdapter()</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">Animator</span><span class="o">.</span><span class="na">AnimatorListener</span> <span class="n">needs</span> <span class="n">to</span> <span class="n">override</span> <span class="n">all</span> <span class="n">the</span> <span class="n">four</span> <span class="n">functions</span><span class="o">.</span> <span class="n">With</span> <span class="n">AnimatorListenerAdapter</span><span class="o">,</span> <span class="n">we</span> <span class="n">conly</span> <span class="n">need</span> <span class="n">to</span> <span class="n">override</span> <span class="n">the</span> <span class="n">functions</span> <span class="n">we</span> <span class="n">need</span><span class="o">.</span>

<span class="n">ObjectAnimator</span> <span class="n">animator</span> <span class="o">=</span> <span class="n">ObjectAnimator</span><span class="o">.</span><span class="na">ofFloat</span><span class="o">(</span><span class="n">view</span><span class="o">,</span> <span class="s">"alpha"</span><span class="o">,</span> <span class="mi">0</span><span class="n">F</span><span class="o">,</span> <span class="mi">1</span><span class="n">F</span><span class="o">);</span> 
<span class="n">animator</span><span class="o">.</span><span class="na">setDuration</span><span class="o">(</span><span class="mi">1000</span><span class="o">);</span> 
<span class="n">animator</span><span class="o">.</span><span class="na">addListener</span><span class="o">(</span><span class="k">new</span> <span class="n">AnimatorListenerAdapter</span><span class="o">()</span> <span class="o">{</span> 
	<span class="nd">@Override</span> 
	<span class="kd">public</span> <span class="kt">void</span> <span class="n">onAnimationEnd</span><span class="o">(</span><span class="n">Animator</span> <span class="n">animation</span><span class="o">)</span> <span class="o">{</span> 
		<span class="kd">super</span><span class="o">.</span><span class="na">onAnimationEnd</span><span class="o">(</span><span class="n">animation</span><span class="o">);</span> 
		<span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="n">MainActivity</span><span class="o">.</span><span class="na">this</span><span class="o">,</span> <span class="s">"end"</span><span class="o">,</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_SHORT</span><span class="o">).</span><span class="na">show</span><span class="o">();</span> 
	<span class="o">}</span>
	<span class="c1">// Override other functions if we need</span>
<span class="o">});</span> 

<span class="c1">// Override all four functions</span>
<span class="cm">/*
animator.addListener(new Animator.AnimatorListener() { 
	@Override 
	public void onAnimationStart(Animator animator) {}

	@Override
	public void onAnimationEnd(Animator animator) {}

	@Override
	public void onAnimationCancel(Animator animator) {}

	@Override
	public void onAnimationRepeat(Animator animator) {}
});
*/</span>

<span class="n">animator</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
</code></pre>
</div>

<h3 id="how-to-use-valueanimator">How to use ValueAnimator</h3>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="c1">// Animator calulates from 0 to 100 in 5 seconds </span>
<span class="n">ValueAnimator</span> <span class="n">animator</span> <span class="o">=</span> <span class="n">ValueAnimator</span><span class="o">.</span><span class="na">ofInt</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">100</span><span class="o">);</span> 
<span class="n">animator</span><span class="o">.</span><span class="na">setDuration</span><span class="o">(</span><span class="mi">5000</span><span class="o">);</span> 

<span class="c1">// Listne to every animation frame </span>
<span class="n">animator</span><span class="o">.</span><span class="na">addUpdateListener</span><span class="o">(</span><span class="k">new</span> <span class="n">ValueAnimator</span><span class="o">.</span><span class="na">AnimatorUpdateListener</span><span class="o">()</span> <span class="o">{</span> 
	<span class="nd">@Override</span> 
	<span class="kd">public</span> <span class="kt">void</span> <span class="n">onAnimationUpdate</span><span class="o">(</span><span class="n">ValueAnimator</span> <span class="n">valueAnimator</span><span class="o">)</span> <span class="o">{</span> 
		<span class="n">Integer</span> <span class="n">value</span> <span class="o">=</span> <span class="o">(</span><span class="n">Integer</span><span class="o">)</span> <span class="n">valueAnimator</span><span class="o">.</span><span class="na">getAnimatedValue</span><span class="o">();</span> 
		<span class="n">button</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="s">""</span> <span class="o">+</span> <span class="n">value</span><span class="o">);</span>
		<span class="c1">// Modify the objects that you want to animate with these calculated values</span>
	<span class="o">}</span> 
<span class="o">});</span>

<span class="n">animator</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
</code></pre>
</div>

<h3 id="valueanimator-for-object">ValueAnimator for Object</h3>

<p>With ValueAnimator.ofObject. ValueAnimator will calculate a time factor between 0 and 1 (animation current time / animation totle time). So we could use it to set specific property animation for each frame.</p>

<p>The idea is that the float fraction determines the position at which to interpolate.</p>

<ul>
  <li>When fraction is 0.0 then evaluate should return the start value.</li>
  <li>When fraction is 1.0 then it should return the end value.</li>
  <li>For any number between 0.0 and 1.0, it should return an object that lies somewhere between the start value and the end value.</li>
</ul>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">ValueAnimator</span> <span class="n">animator</span> <span class="o">=</span> <span class="n">ValueAnimator</span><span class="o">.</span><span class="na">ofObject</span><span class="o">(</span><span class="k">new</span> <span class="n">TypeEvaluator</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;()</span> <span class="o">{</span> 
	<span class="nd">@Override</span> 
	<span class="kd">public</span> <span class="n">Object</span> <span class="n">evaluate</span><span class="o">(</span><span class="kt">float</span> <span class="n">v</span><span class="o">,</span> <span class="n">Object</span> <span class="n">startValue</span><span class="o">,</span> <span class="n">Object</span> <span class="n">endValue</span><span class="o">)</span> <span class="o">{</span> 
		<span class="c1">// ToDo return your object according to v (0.0 to 1.0)</span>
<span class="o">});</span>
</code></pre>
</div>

            </article>
            
            <div class="share">
                <div class="share-component"></div>
            </div>
            
            
            <div class="comment">
                
  
      
          <div id="disqus_thread"></div>
          <script>
            var disqus_config = function () {
              this.page=this.page||{};
              this.page.url = document.location.href.replace(document.location.host,'zale.site');
              this.page.identifier = '/articles/2015/08/Object-Animation.html';
              this.page.title = 'Android Object Animator';
            };
            (function() { // DON'T EDIT BELOW THIS LINE
              var d = document, s = d.createElement('script');

              s.type = 'text/javascript';
              s.async = true;
              var shortname = 'zale';

              s.src = '//' + shortname + '.disqus.com/embed.js';

              s.setAttribute('data-timestamp', +new Date());
              (d.head || d.body).appendChild(s);
            })();
          </script>
          <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

      
    

            </div>
            
        </div>
        <div class="column one-fourth">
            
<h3>Search</h3>
<form action="get" id="site_search">
    <input type="text" id="search_box" placeholder="Search">
    <button class="btn btn-default" type="submit"><span class="octicon octicon-search"></span></button>
</form>

<ul id="search_results"></ul>

<link rel="stylesheet" type="text/css" href="/assets/css/modules/sidebar-search.css">


            <h3>Directory</h3>
<div id="post-directory-module">
    <section class="post-directory">
        <!-- Links that trigger the jumping -->
        <!-- Added by javascript below -->
        <dl></dl>
    </section>
</div>

<script type="text/javascript">

    $(document).ready(function () {
        $("article h2").each(function (index) {
            $(".post-directory dl").append("<dt><a class=\"jumper\" href=#" +
                    $(this).attr("id")
                    + ">"
                    + $(this).text()
                    + "</a></dt>");

            var children = $(this).nextUntil("h2", "h3");

            children.each(function (index) {
                $(".post-directory dl").append("<dd><a class=\"jumper\" href=#" +
                        $(this).attr("id")
                        + ">"
                        + "&nbsp;&nbsp;- " + $(this).text()
                        + "</a></dd>");
            });
        });

        //排除小设备下的fixed布局
        if ($(document).width() > parseFloat($('body').css('fontSize')) * 50) {

            var fixmeTop = $('#post-directory-module').offset().top - 80;       // get initial position of the element
            $(window).scroll(function () {                  // assign scroll event listener

                var currentScroll = $(window).scrollTop(); // get current position

                if (currentScroll >= fixmeTop) {           // apply position: fixed if you
                    $('#post-directory-module').css({                      // scroll to that element or below it
                        top: '80px',
                        position: 'fixed',
                    });
                } else {                                   // apply position: static
                    $('#post-directory-module').css({                      // if you scroll above it
                        position: 'inherit',
                    });
                }
            });
        }
        $('#post-directory-module a').parent().click(function ($event) {
            $(this).find('a').click();
        });
    });


</script>
        </div>
    </div>
</section>
<!-- /section.content -->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
tex2jax: {
  inlineMath: [['$','$'], ['\\(','\\)']]
  }
});
</script>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    <footer class="container">
        <div class="site-footer" role="contentinfo">
            <div class="copyright left mobile-block">
                    © 2015
                    <span title="Zale">Zale</span>
                    <a href="javascript:$('body, html').animate({scrollTop: 0}, 600)" class="right mobile-visible">TOP</a>
            </div>

            <ul class="site-footer-links right mobile-hidden">
                <li>
                    <a href="javascript:$('body, html').animate({scrollTop: 0}, 600)" >TOP</a>
                </li>
            </ul>
            <a href="https://github.com/zl810881283/zl810881283.github.io" target="_blank" aria-label="view source code">
                <span class="mega-octicon octicon-mark-github" title="GitHub"></span>
            </a>
            <ul class="site-footer-links mobile-hidden">
                
                <li>
                    <a href="/" title="Home" target="">Home</a>
                </li>
                
                <li>
                    <a href="/categories" title="Categories" target="">Categories</a>
                </li>
                
                <li>
                    <a href="/wiki" title="Wiki" target="">Wiki</a>
                </li>
                
                <li>
                    <a href="/bookmark" title="Bookmark" target="">Bookmark</a>
                </li>
                
                <li>
                    <a href="/open-source" title="Open-source" target="">Open-source</a>
                </li>
                
                <li>
                    <a href="/about" title="About" target="">About</a>
                </li>
                
                <li><a href="/feed.xml"><span class="octicon octicon-rss" style="color:orange;"></span></a></li>
            </ul>

        </div>
    </footer>
    <script>
      jQuery(document).ready(function($) {
        // geopattern
        $('.geopattern').each(function(){
          $(this).geopattern($(this).data('pattern-id'));
        });
       // hljs.initHighlightingOnLoad();
      });
    </script>
    
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-76860417-1', 'auto');
        ga('send', 'pageview');

    </script>

    
    <script src="/assets/js/hashchange.js"></script>
    </body>
</html>
