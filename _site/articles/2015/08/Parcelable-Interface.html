<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <title>Android Parcelable Interface &mdash; Zale - Zale's Blog 张乐博客 个人网站</title>

    <!-- Latest compiled and minified CSS -->
    

    
    <link rel="alternate" type="application/atom+xml" title="overtrue" href="/atom.xml">

    <link rel="apple-touch-icon-precomposed" href="/assets/images/apple-touch-icon-57x57-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/assets/images/apple-touch-icon-72x72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/assets/images/apple-touch-icon-114x114-precomposed.png">
    
    <meta property="og:title" content="Android Parcelable Interface">
      
    <meta name="keywords" content="Zale, 张乐, blog, 博客, ZhangLe, 个人网站">
    <meta name="og:keywords" content="Zale, 张乐, blog, 博客, ZhangLe, 个人网站">
      
    <meta name="description" content="Parcelable Interface">
    <meta name="og:description" content="Parcelable Interface">
      
    
    
        
    
    <meta property="og:url" content="//articles/2015/08/Parcelable-Interface.html">
    <meta property="og:site_name" content="zale.site">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="zh_CN" />
    
    <meta property="article:published_time" content="2015-08-15">
    

    <!-- Favicon Icon -->
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    <!-- 3rd party css -->


    <link rel="stylesheet" href="/bower_components/octicons/octicons/octicons.css">
    <link rel="stylesheet" href="/bower_components/Trip.js/dist/trip.min.css">
    <link rel="stylesheet" href="/bower_components/flag-icon-css/css/flag-icon.css" >
    <link rel="stylesheet" href="/bower_components/share.js/dist/css/share.min.css">
    <link rel="stylesheet" href="/bower_components/primer-css/css/primer.css">
    <link rel="stylesheet" href="/bower_components/primer-markdown/dist/user-content.min.css">

    <!-- custom css-->
    <link rel="stylesheet" href="/assets/css/components/collection.css">
    <link rel="stylesheet" href="/assets/css/components/repo-card.css">
    <link rel="stylesheet" href="/assets/css/sections/repo-list.css">
    <link rel="stylesheet" href="/assets/css/sections/mini-repo-list.css">
    <link rel="stylesheet" href="/assets/css/components/boxed-group.css">
    <link rel="stylesheet" href="/assets/css/globals/common.css">
    <link rel="stylesheet" href="/assets/css/posts/index.css">
    <link rel="stylesheet" href="/assets/css/pages/index.css">
    <link rel="stylesheet" href="/assets/css/pages/hover-min.css">
    <link rel="stylesheet" href="/assets/css/globals/prism.css">
    <link rel="stylesheet" href="/assets/css/globals/responsive.css">


    <!-- 3rd party scripts -->
    <script src="/bower_components/jquery/dist/jquery.min.js"></script>
    <script src="/bower_components/jquery-ui/jquery-ui.min.js"></script>
    <script src="/bower_components/Trip.js/dist/trip.min.js"></script>
    <script src="/bower_components/share.js/dist/js/share.min.js"></script>

    <!-- custom scripts-->
    <script src="/assets/js/index.js"></script>
    <script src="/assets/js/geopattern.js"></script>
    <script src="/assets/js/prism.js"></script>
    <script src="/assets/js/lunr.min.js"></script>
    <script src="/assets/js/search.js"></script>


    

</head>
<body class="">
    <header class="site-header" id="site-header-id">
        <div class="container">
            <h1><a href="/" title="Zale"><span class="octicon octicon-mark-github"></span> Zale</a></h1>
            <nav class="site-header-nav" role="navigation">
                
                <a href="/" class=" site-header-nav-item hvr-underline-from-center" target="" title="Home">Home</a>
                
                <a href="/categories" class=" site-header-nav-item hvr-underline-from-center" target="" title="Categories">Categories</a>
                
                <a href="/wiki" class=" site-header-nav-item hvr-underline-from-center" target="" title="Wiki">Wiki</a>
                
                <a href="/bookmark" class=" site-header-nav-item hvr-underline-from-center" target="" title="Bookmark">Bookmark</a>
                
                <a href="/open-source" class=" site-header-nav-item hvr-underline-from-center" target="" title="Open-source">Open-source</a>
                
                <a href="/about" class=" site-header-nav-item hvr-underline-from-center" target="" title="About">About</a>
                
            </nav>
        </div>
    </header>
    <!-- / header -->
    <section class="collection-head collection-head-scrolled geopattern" data-pattern-id="Android Parcela">
    <div class="container">
        <div class="columns">
            <div class="column">
                <div class="collection-title">
                    <h1 class="collection-header">Android Parcelable Interface</h1>
                    <div class="collection-info">
                        <span class="meta-info">
                            
                            
                                <span class="octicon octicon-calendar"></span> 2015/08/15
                            
                        </span>
                        
                          <span class="meta-info">
                            <span class="octicon octicon-file-directory"></span>
                            <a href="/categories#android" title="Android">Android</a>
                          </span>
                        
                        
                        <span class="meta-info">
                            <span class="octicon octicon-tag"></span>
                            
                            <a href="/tags#android" title="Android">Android</a>
                            
                        </span>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- / .banner -->
<section class="container content">
    <div class="columns">
        <div class="column three-fourths" >
            <article class="article-content markdown-body">
                <h2 id="parcelable-interface">Parcelable Interface</h2>

<p>Interface for classes whose instances can be written to and restored from a Parcel. 
Classes implementing the <code class="highlighter-rouge">Parcelable</code> interface must also have a non-null static field called <strong>CREATOR</strong> of a type that implements the <code class="highlighter-rouge">Parcelable.Creator</code> interface.</p>

<h3 id="there-are-two-options-to-realize-serialization">There are two options to realize serialization:</h3>

<ol>
  <li>Serializable Interface</li>
  <li>Parcelable Interface (Android Only)</li>
</ol>

<p>Here parcelable is more efficient. It could be used to <strong>transfer object by intents</strong> and <strong>IPC</strong> (inter-process communication). In general, we could only use intents to pass values like int, string and so on. But now with Parcelable, you can transfer <strong>Objects</strong> like a car, a person :P</p>

<p>PS: Both of these two interfaces could achieve this. <code class="highlighter-rouge">Bundle.putSerializable(Key, Object)</code> for <code class="highlighter-rouge">Serializable</code> interface. <code class="highlighter-rouge">Bundle.putParcelable(Key，Object)</code> for <code class="highlighter-rouge">Parcelable</code> interface.</p>

<h3 id="how-to-choose-between-them">How to choose between them?</h3>

<ol>
  <li>
    <p>Parcelable is more frequent in the use of memory.</p>
  </li>
  <li>
    <p>Serializable will produce a large number of temporary variables which causes freqiemt GC.</p>
  </li>
  <li>
    <p>Parcelable is not appropriate to place any Parcel data in to persistent storage. Changes in the underlying implementation of any of the data in the Parcel can render older data unreadable. In this situation, Serializable could be better.</p>
  </li>
</ol>

<blockquote>
  <p>Why serialization? 
1) To permanently save the object, by sequence of bytes saved to a local file. 
2) To pass an object in the network. 3) To pass an object between processes (IPC).</p>
</blockquote>

<h3 id="when-to-use-it">When to use it?</h3>

<p>If you need to transfer complex data types (objects) between components like Activity or Service. For simple data like int, just use Intent directly.</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ObjectA</span> <span class="kd">implements</span> <span class="n">Parcelable</span> <span class="o">{</span>
 
	<span class="kd">private</span> <span class="n">String</span> <span class="n">strValue</span><span class="o">;</span>
	<span class="kd">private</span> <span class="n">Integer</span> <span class="n">intValue</span><span class="o">;</span>
 
	<span class="cm">/**
	 * Standard basic constructor for non-parcel object creation
	 */</span>
	<span class="kd">public</span> <span class="n">ObjectA</span><span class="o">()</span> <span class="o">{};</span>
 
	<span class="cm">/**
	 * Constructor to use when re-constructing object
	 * from a parcel
	 */</span>
	<span class="kd">public</span> <span class="n">ObjectA</span><span class="o">(</span><span class="n">Parcel</span> <span class="n">in</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">readFromParcel</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
	<span class="o">}</span>
 	
 	<span class="cm">/**
     * This field is needed for Android to be able to
     * create new objects, individually or as arrays.
     * This also means that you can use the default
     * constructor to create the object and use another
     * method to hyrdate it as necessary. It's easier to 
     * use the constructor.
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Parcelable</span><span class="o">.</span><span class="na">Creator</span> <span class="n">CREATOR</span> <span class="o">=</span>
    	<span class="k">new</span> <span class="n">Parcelable</span><span class="o">.</span><span class="na">Creator</span><span class="o">()</span> <span class="o">{</span>
            <span class="kd">public</span> <span class="n">ObjectA</span> <span class="n">createFromParcel</span><span class="o">(</span><span class="n">Parcel</span> <span class="n">in</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">return</span> <span class="k">new</span> <span class="n">ObjectA</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
            <span class="o">}</span>
 
            <span class="kd">public</span> <span class="n">ObjectA</span><span class="o">[]</span> <span class="n">newArray</span><span class="o">(</span><span class="kt">int</span> <span class="n">size</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">return</span> <span class="k">new</span> <span class="n">ObjectA</span><span class="o">[</span><span class="n">size</span><span class="o">];</span>
            <span class="o">}</span>
        <span class="o">};</span>

 	<span class="cm">/**
 	 * Details: http://stackoverflow.com/questions/4076946/parcelable-where-when-is-describecontents-
     * used/4914799#4914799
     * Only need when you want to put FileDescriptor object into Parceable. Dont dont care about it.
 	 */</span>
	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kt">int</span> <span class="n">describeContents</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="mi">0</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="cm">/**
	 * Write each field into the parcel. Take care about the order.
	 * When readFromParcel(), they should be in the same order.
	 */</span>
	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="n">writeToParcel</span><span class="o">(</span><span class="n">Parcel</span> <span class="n">dest</span><span class="o">,</span> <span class="kt">int</span> <span class="n">flags</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">dest</span><span class="o">.</span><span class="na">writeString</span><span class="o">(</span><span class="n">strValue</span><span class="o">);</span>
		<span class="n">dest</span><span class="o">.</span><span class="na">writeInt</span><span class="o">(</span><span class="n">intValue</span><span class="o">);</span>
	<span class="o">}</span>
 
	<span class="cm">/**
	 * Called from the constructor to re-create object from a parcel.
	 * Should be the same order in writeToParcel().
	 */</span>
	<span class="kd">private</span> <span class="kt">void</span> <span class="n">readFromParcel</span><span class="o">(</span><span class="n">Parcel</span> <span class="n">in</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">strValue</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readString</span><span class="o">();</span>
		<span class="n">intValue</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readInt</span><span class="o">();</span>
	<span class="o">}</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="n">getStrValue</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">strValue</span><span class="o">;</span> <span class="o">}</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="n">setStrValue</span><span class="o">(</span><span class="n">String</span> <span class="n">strValue</span><span class="o">)</span> <span class="o">{</span> <span class="k">this</span><span class="o">.</span><span class="na">strValue</span> <span class="o">=</span> <span class="n">strValue</span><span class="o">;</span> <span class="o">}</span>
 
	<span class="kd">public</span> <span class="n">Integer</span> <span class="n">getIntValue</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">intValue</span><span class="o">;</span> <span class="o">}</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="n">setIntValue</span><span class="o">(</span><span class="n">Integer</span> <span class="n">intValue</span><span class="o">)</span> <span class="o">{</span> <span class="k">this</span><span class="o">.</span><span class="na">intValue</span> <span class="o">=</span> <span class="n">intValue</span><span class="o">;</span> <span class="o">}</span>
 
<span class="o">}</span>
</code></pre>
</div>


            </article>
            
            <div class="share">
                <div class="share-component"></div>
            </div>
            
            
            <div class="comment">
                
  
      
          <div id="disqus_thread"></div>
          <script>
            var disqus_config = function () {
              this.page=this.page||{};
              this.page.url = document.location.href.replace(document.location.host,'zale.site');
              this.page.identifier = '/articles/2015/08/Parcelable-Interface.html';
              this.page.title = 'Android Parcelable Interface';
            };
            (function() { // DON'T EDIT BELOW THIS LINE
              var d = document, s = d.createElement('script');

              s.type = 'text/javascript';
              s.async = true;
              var shortname = 'zale';

              s.src = '//' + shortname + '.disqus.com/embed.js';

              s.setAttribute('data-timestamp', +new Date());
              (d.head || d.body).appendChild(s);
            })();
          </script>
          <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

      
    

            </div>
            
        </div>
        <div class="column one-fourth">
            
<h3>Search</h3>
<form action="get" id="site_search">
    <input type="text" id="search_box" placeholder="Search">
    <button class="btn btn-default" type="submit"><span class="octicon octicon-search"></span></button>
</form>

<ul id="search_results"></ul>

<link rel="stylesheet" type="text/css" href="/assets/css/modules/sidebar-search.css">


            <h3>Directory</h3>
<div id="post-directory-module">
    <section class="post-directory">
        <!-- Links that trigger the jumping -->
        <!-- Added by javascript below -->
        <dl></dl>
    </section>
</div>

<script type="text/javascript">

    $(document).ready(function () {
        $("article h2").each(function (index) {
            $(".post-directory dl").append("<dt><a class=\"jumper\" href=#" +
                    $(this).attr("id")
                    + ">"
                    + $(this).text()
                    + "</a></dt>");

            var children = $(this).nextUntil("h2", "h3");

            children.each(function (index) {
                $(".post-directory dl").append("<dd><a class=\"jumper\" href=#" +
                        $(this).attr("id")
                        + ">"
                        + "&nbsp;&nbsp;- " + $(this).text()
                        + "</a></dd>");
            });
        });

        //排除小设备下的fixed布局
        if ($(document).width() > parseFloat($('body').css('fontSize')) * 50) {

            var fixmeTop = $('#post-directory-module').offset().top - 80;       // get initial position of the element
            $(window).scroll(function () {                  // assign scroll event listener

                var currentScroll = $(window).scrollTop(); // get current position

                if (currentScroll >= fixmeTop) {           // apply position: fixed if you
                    $('#post-directory-module').css({                      // scroll to that element or below it
                        top: '80px',
                        position: 'fixed',
                    });
                } else {                                   // apply position: static
                    $('#post-directory-module').css({                      // if you scroll above it
                        position: 'inherit',
                    });
                }
            });
        }
        $('#post-directory-module a').parent().click(function ($event) {
            $(this).find('a').click();
        });
    });


</script>
        </div>
    </div>
</section>
<!-- /section.content -->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
tex2jax: {
  inlineMath: [['$','$'], ['\\(','\\)']]
  }
});
</script>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    <footer class="container">
        <div class="site-footer" role="contentinfo">
            <div class="copyright left mobile-block">
                    © 2015
                    <span title="Zale">Zale</span>
                    <a href="javascript:$('body, html').animate({scrollTop: 0}, 600)" class="right mobile-visible">TOP</a>
            </div>

            <ul class="site-footer-links right mobile-hidden">
                <li>
                    <a href="javascript:$('body, html').animate({scrollTop: 0}, 600)" >TOP</a>
                </li>
            </ul>
            <a href="https://github.com/zl810881283/zl810881283.github.io" target="_blank" aria-label="view source code">
                <span class="mega-octicon octicon-mark-github" title="GitHub"></span>
            </a>
            <ul class="site-footer-links mobile-hidden">
                
                <li>
                    <a href="/" title="Home" target="">Home</a>
                </li>
                
                <li>
                    <a href="/categories" title="Categories" target="">Categories</a>
                </li>
                
                <li>
                    <a href="/wiki" title="Wiki" target="">Wiki</a>
                </li>
                
                <li>
                    <a href="/bookmark" title="Bookmark" target="">Bookmark</a>
                </li>
                
                <li>
                    <a href="/open-source" title="Open-source" target="">Open-source</a>
                </li>
                
                <li>
                    <a href="/about" title="About" target="">About</a>
                </li>
                
                <li><a href="/feed.xml"><span class="octicon octicon-rss" style="color:orange;"></span></a></li>
            </ul>

        </div>
    </footer>
    <script>
      jQuery(document).ready(function($) {
        // geopattern
        $('.geopattern').each(function(){
          $(this).geopattern($(this).data('pattern-id'));
        });
       // hljs.initHighlightingOnLoad();
      });
    </script>
    
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-76860417-1', 'auto');
        ga('send', 'pageview');

    </script>

    
    <script src="/assets/js/hashchange.js"></script>
    </body>
</html>
