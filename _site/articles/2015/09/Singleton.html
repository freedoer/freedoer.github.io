<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <title>Singleton Pattern &mdash; Zale - Zale's Blog 张乐博客 个人网站</title>

    <!-- Latest compiled and minified CSS -->
    

    
    <link rel="alternate" type="application/atom+xml" title="overtrue" href="/atom.xml">

    <link rel="apple-touch-icon-precomposed" href="/assets/images/apple-touch-icon-57x57-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/assets/images/apple-touch-icon-72x72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/assets/images/apple-touch-icon-114x114-precomposed.png">
    
    <meta property="og:title" content="Singleton Pattern">
      
    <meta name="keywords" content="Zale, 张乐, blog, 博客, ZhangLe, 个人网站">
    <meta name="og:keywords" content="Zale, 张乐, blog, 博客, ZhangLe, 个人网站">
      
    <meta name="description" content="Singleton">
    <meta name="og:description" content="Singleton">
      
    
    
        
    
    <meta property="og:url" content="//articles/2015/09/Singleton.html">
    <meta property="og:site_name" content="zale.site">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="zh_CN" />
    
    <meta property="article:published_time" content="2015-09-13">
    

    <!-- Favicon Icon -->
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    <!-- 3rd party css -->


    <link rel="stylesheet" href="/bower_components/octicons/octicons/octicons.css">
    <link rel="stylesheet" href="/bower_components/Trip.js/dist/trip.min.css">
    <link rel="stylesheet" href="/bower_components/flag-icon-css/css/flag-icon.css" >
    <link rel="stylesheet" href="/bower_components/share.js/dist/css/share.min.css">
    <link rel="stylesheet" href="/bower_components/primer-css/css/primer.css">
    <link rel="stylesheet" href="/bower_components/primer-markdown/dist/user-content.min.css">

    <!-- custom css-->
    <link rel="stylesheet" href="/assets/css/components/collection.css">
    <link rel="stylesheet" href="/assets/css/components/repo-card.css">
    <link rel="stylesheet" href="/assets/css/sections/repo-list.css">
    <link rel="stylesheet" href="/assets/css/sections/mini-repo-list.css">
    <link rel="stylesheet" href="/assets/css/components/boxed-group.css">
    <link rel="stylesheet" href="/assets/css/globals/common.css">
    <link rel="stylesheet" href="/assets/css/posts/index.css">
    <link rel="stylesheet" href="/assets/css/pages/index.css">
    <link rel="stylesheet" href="/assets/css/pages/hover-min.css">
    <link rel="stylesheet" href="/assets/css/globals/prism.css">
    <link rel="stylesheet" href="/assets/css/globals/responsive.css">


    <!-- 3rd party scripts -->
    <script src="/bower_components/jquery/dist/jquery.min.js"></script>
    <script src="/bower_components/jquery-ui/jquery-ui.min.js"></script>
    <script src="/bower_components/Trip.js/dist/trip.min.js"></script>
    <script src="/bower_components/share.js/dist/js/share.min.js"></script>

    <!-- custom scripts-->
    <script src="/assets/js/index.js"></script>
    <script src="/assets/js/geopattern.js"></script>
    <script src="/assets/js/prism.js"></script>
    <script src="/assets/js/lunr.min.js"></script>
    <script src="/assets/js/search.js"></script>


    

</head>
<body class="">
    <header class="site-header" id="site-header-id">
        <div class="container">
            <h1><a href="/" title="Zale"><span class="octicon octicon-mark-github"></span> Zale</a></h1>
            <nav class="site-header-nav" role="navigation">
                
                <a href="/" class=" site-header-nav-item hvr-underline-from-center" target="" title="Home">Home</a>
                
                <a href="/categories" class=" site-header-nav-item hvr-underline-from-center" target="" title="Categories">Categories</a>
                
                <a href="/wiki" class=" site-header-nav-item hvr-underline-from-center" target="" title="Wiki">Wiki</a>
                
                <a href="/bookmark" class=" site-header-nav-item hvr-underline-from-center" target="" title="Bookmark">Bookmark</a>
                
                <a href="/open-source" class=" site-header-nav-item hvr-underline-from-center" target="" title="Open-source">Open-source</a>
                
                <a href="/about" class=" site-header-nav-item hvr-underline-from-center" target="" title="About">About</a>
                
            </nav>
        </div>
    </header>
    <!-- / header -->
    <section class="collection-head collection-head-scrolled geopattern" data-pattern-id="Singleton Patte">
    <div class="container">
        <div class="columns">
            <div class="column">
                <div class="collection-title">
                    <h1 class="collection-header">Singleton Pattern</h1>
                    <div class="collection-info">
                        <span class="meta-info">
                            
                            
                                <span class="octicon octicon-calendar"></span> 2015/09/13
                            
                        </span>
                        
                          <span class="meta-info">
                            <span class="octicon octicon-file-directory"></span>
                            <a href="/categories#design-pattern" title="Design Pattern">Design Pattern</a>
                          </span>
                        
                        
                        <span class="meta-info">
                            <span class="octicon octicon-tag"></span>
                            
                            <a href="/tags#java" title="Java">Java</a>,
                            
                            <a href="/tags#design-pattern" title="Design Pattern">Design Pattern</a>
                            
                        </span>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- / .banner -->
<section class="container content">
    <div class="columns">
        <div class="column three-fourths" >
            <article class="article-content markdown-body">
                <h2 id="singleton">Singleton</h2>

<p>It ensures <strong>only one instance for a class</strong>. More detail, it involves one class which is responsible to instantiate itself, to make sure it creates only one instance and, in the same time, it provides a global point of access to that instance.</p>

<h2 id="different-implementations">Different implementations</h2>

<p>There are different implementations for singleton to solve different problems. They have some common points</p>

<blockquote>
  <p>Constructor must be private. To ensure that only itself could instantiates itself :P
A static method which should be a global point of access to get the instance</p>
</blockquote>

<h3 id="basic">Basic</h3>

<p>The following is the simplest way:</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Singleton</span> <span class="o">{</span>  

    <span class="kd">private</span> <span class="kd">static</span> <span class="n">Singleton</span> <span class="n">instance</span><span class="o">;</span>

    <span class="kd">private</span> <span class="n">Singleton</span> <span class="o">(){}</span>
 
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">Singleton</span> <span class="n">getInstance</span><span class="o">()</span> <span class="o">{</span> 
	    <span class="k">if</span> <span class="o">(</span><span class="n">instance</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>         <span class="c1">// 1</span>
	        <span class="n">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Singleton</span><span class="o">();</span> <span class="c1">// 2</span>
	    <span class="o">}</span> 
	    <span class="k">return</span> <span class="n">instance</span><span class="o">;</span>                <span class="c1">// 3</span>
    <span class="o">}</span> 
<span class="o">}</span> 
</code></pre>
</div>

<p>It ensures that only creates a Singleton object. Its constructor is <strong>private</strong>, <code class="highlighter-rouge">getInstance ()</code> method creates only one object. <strong>But it is only suitable for single-threaded programs</strong>.</p>

<p>So for multi-thread, ‘synchronized’ key word must be added on <code class="highlighter-rouge">getInstance()</code>. If no this key word, <code class="highlighter-rouge">getInstance()</code> may return two different instances.</p>

<p>Now let’s suppose two threads concurrently call the <code class="highlighter-rouge">getInstance()</code> method in the following order:</p>

<ol>
  <li>Thread 1 calls <code class="highlighter-rouge">getInstance()</code> method and finds instance at // 1 is null.</li>
  <li>Thread 1 enters <code class="highlighter-rouge">if</code> block, but in the implementation of the code line // 2 Thread 2 is preempted.</li>
  <li>Thread 2 calls <code class="highlighter-rouge">getInstance()</code> method and finds instance at // 1 is null.</li>
  <li>Thread 2 enters <code class="highlighter-rouge">if</code> block and creates a new Singleton object.</li>
  <li>Thread 2 returns reference of instance at // 3.</li>
  <li>Thread 2 is preempted by Thread 1.</li>
  <li>Thread 1 starts where it left off and executes // 2, which lead to creation of another instance.</li>
  <li>Thread 1 returns reference of another instance at // 3.</li>
</ol>

<p>So <code class="highlighter-rouge">getInstance()</code> method creates two different instances. By synchronizing the ‘getInstance()’ method so that in the mean time, only one thread is allowed to execute code. Let’s see the next implementation.</p>

<h3 id="thread-safe">Thread safe</h3>

<p>Now with <code class="highlighter-rouge">synchronized</code> key word for thread safety:</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Singleton</span> <span class="o">{</span> 

    <span class="kd">private</span> <span class="kd">static</span> <span class="n">Singleton</span> <span class="n">instance</span><span class="o">;</span>  

    <span class="kd">private</span> <span class="n">Singleton</span> <span class="o">(){}</span>  

    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">synchronized</span> <span class="n">Singleton</span> <span class="n">getInstance</span><span class="o">()</span> <span class="o">{</span>  
	    <span class="k">if</span> <span class="o">(</span><span class="n">instance</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>  
	        <span class="n">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Singleton</span><span class="o">();</span>  
	    <span class="o">}</span>  
	    <span class="k">return</span> <span class="n">instance</span><span class="o">;</span>  
    <span class="o">}</span>  
<span class="o">}</span> 
</code></pre>
</div>

<p>But we should only use this way when <code class="highlighter-rouge">getInstance()</code> is not invoked too many times. Because <code class="highlighter-rouge">synchronized</code> consumes a lot of resources.</p>

<h3 id="eager-initialization">Eager initialization</h3>

<p>It will <strong>create an instance when load a class but before it is used by any thread</strong>. So it means, no need to synchronize the <code class="highlighter-rouge">getInstance()</code> method, meaning all threads will see the same instance and no (expensive) locking is required. But this implementation will always creates an instance. So it is suggested to use when you are 100% sure an instance will be needed. If not, waste resource for sure.</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Singleton</span> <span class="o">{</span> 

    <span class="kd">private</span> <span class="kd">static</span> <span class="n">Singleton</span> <span class="n">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Singleton</span><span class="o">();</span>  

    <span class="kd">private</span> <span class="n">Singleton</span> <span class="o">(){}</span>  

    <span class="kd">public</span> <span class="kd">static</span> <span class="n">Singleton</span> <span class="n">getInstance</span><span class="o">()</span> <span class="o">{</span>  
    	<span class="k">return</span> <span class="n">instance</span><span class="o">;</span>  
    <span class="o">}</span>  
<span class="o">}</span> 
</code></pre>
</div>

<blockquote>
  <p>You could also add <code class="highlighter-rouge">final</code> keyword on instance which means that the instance cannot be redefined, ensuring that one and only one instance ever exists.</p>
</blockquote>

<h3 id="double-checked-locking">Double-checked locking</h3>

<p>Let’s see firstly:</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="n">Singleton</span> <span class="nf">getInstance</span><span class="p">(</span><span class="o">)</span>
<span class="o">{</span>
	<span class="k">if</span> <span class="o">(</span><span class="n">instance</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
	    <span class="kd">synchronized</span><span class="o">(</span><span class="n">Singleton</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> <span class="o">{</span>
	      <span class="n">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Singleton</span><span class="o">();</span> <span class="c1">// 1</span>
		<span class="o">}</span>
	<span class="o">}</span>

	<span class="k">return</span> <span class="n">instance</span><span class="o">;</span>
<span class="o">}</span>
</code></pre>
</div>

<p>I think this is reasonable, because we only need to do synchronized at // 1. But it has the same thread problem when two threads concurrently call the <code class="highlighter-rouge">getInstance()</code> method. They do the null checking before synchronized. So let’s add another check after <code class="highlighter-rouge">synchronized</code>:</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="n">Singleton</span> <span class="nf">getInstance</span><span class="p">(</span><span class="o">)</span>
<span class="o">{</span>
 	<span class="k">if</span> <span class="o">(</span><span class="n">instance</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
		<span class="kd">synchronized</span><span class="o">(</span><span class="n">Singleton</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> <span class="o">{</span>
	     	<span class="k">if</span> <span class="o">(</span><span class="n">instance</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> 
	        	<span class="n">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Singleton</span><span class="o">();</span> 
   		<span class="o">}</span>
  	<span class="o">}</span>

  	<span class="k">return</span> <span class="n">instance</span><span class="o">;</span>
<span class="o">}</span>
</code></pre>
</div>

<p>So it’s why it is called <strong>Double-checked locking</strong>. What’s more, in this way, if the first instance is checked not null, synchronized will be skipped which saves resources. But due to <strong>Java platform memory model</strong> problems. It’s not that stable, please check * <a href="http://www.ibm.com/developerworks/library/j-dcl/">Double-checked locking and the Singleton pattern</a> for more details about this discussion.</p>

<p>Here <code class="highlighter-rouge">volatile</code> is suggested to use for jdk &gt; 1.5 for memory problems. Check <a href="http://www.javamex.com/tutorials/synchronization_volatile.shtml">here</a> for more details about this key word.</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Singleton</span> <span class="o">{</span> 

    <span class="kd">private</span> <span class="kd">volatile</span> <span class="kd">static</span> <span class="n">Singleton</span> <span class="n">singleton</span><span class="o">;</span> 

    <span class="kd">private</span> <span class="n">Singleton</span> <span class="o">(){}</span> 

    <span class="kd">public</span> <span class="kd">static</span> <span class="n">Singleton</span> <span class="n">getSingleton</span><span class="o">()</span> <span class="o">{</span>  
	    <span class="k">if</span> <span class="o">(</span><span class="n">singleton</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>  
	        <span class="kd">synchronized</span> <span class="o">(</span><span class="n">Singleton</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> <span class="o">{</span>  
	        <span class="k">if</span> <span class="o">(</span><span class="n">singleton</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>  
	            <span class="n">singleton</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Singleton</span><span class="o">();</span>  
	        <span class="o">}</span>  
	        <span class="o">}</span>  
	    <span class="o">}</span>  
	    <span class="k">return</span> <span class="n">singleton</span><span class="o">;</span>  
    <span class="o">}</span>  
<span class="o">}</span> 
</code></pre>
</div>

<h3 id="lazy-initialization-holder-class">Lazy initialization holder class</h3>

<p>To achieve thread-safe simply, we can use static initializer. For example, like <strong>Eager initialization</strong>. But in this way, it will initialize the object when load class, regardless of whether you need it or not.</p>

<p>So we want to load the class without initializing this object. One possible way is to use the class-level internal class, in this class to create an object instance. As a result, it will not create this instance until this class is used, so we have lazy loading and thread-safe in the mean time.</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Singleton</span> <span class="o">{</span>
    
    <span class="kd">private</span> <span class="n">Singleton</span><span class="o">(){}</span>
    
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">SingletonHolder</span><span class="o">{</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="n">Singleton</span> <span class="n">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Singleton</span><span class="o">();</span>
    <span class="o">}</span>
    
    <span class="kd">public</span> <span class="kd">static</span> <span class="n">Singleton</span> <span class="n">getInstance</span><span class="o">(){</span>
        <span class="k">return</span> <span class="n">SingletonHolder</span><span class="o">.</span><span class="na">instance</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<p>When <code class="highlighter-rouge">getInstance()</code> is invoked in the first time. It will load <code class="highlighter-rouge">SingletonHolder.instance</code> which leads <code class="highlighter-rouge">SingletonHolder</code> class to be initialized. When <code class="highlighter-rouge">SingletonHolder</code> is initialized, it will initialize its static field. As it’s a static field, so it will only be initialized one time and thread safe :D</p>

<h3 id="enum">Enum</h3>

<p>It is suggested by Josh Bloch, author of «Effective Java». Due to <code class="highlighter-rouge">enum</code>, It can not only avoid the multi-thread synchronization problem, but also automatically supports serialization mechanism and prevent deserialization recreate a new object, also for sure, absolutely prevent multiple instances!</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">enum</span> <span class="n">Singleton</span> <span class="o">{</span>

    <span class="cm">/**
     * Define an element which means an instance of Singleton
     */</span>
    <span class="n">uniqueInstance</span><span class="o">;</span>
    
    <span class="kd">public</span> <span class="kt">void</span> <span class="n">Singleton</span><span class="o">(){</span>
        <span class="c1">//ToDo</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<p>Let’s see an example:</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">enum</span> <span class="n">MySingleton</span> <span class="o">{</span>
    <span class="n">INSTANCE</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">MySingleton</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Here"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<p>An <code class="highlighter-rouge">enum</code> type is a special type of <code class="highlighter-rouge">class</code> type. This enum declaration actually compiles to something like</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">MySingleton</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">final</span> <span class="kd">static</span> <span class="n">MySingleton</span> <span class="n">INSTANCE</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MySingleton</span><span class="o">();</span> 
<span class="o">}</span>
</code></pre>
</div>

<p>When your code first accesses INSTANCE, the class <code class="highlighter-rouge">MySingleton</code> will be loaded and initialized by the JVM. This process initializes the static field above once (lazily).</p>

<p>Test it:</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">MySingleton</span><span class="o">.</span><span class="na">INSTANCE</span><span class="o">);</span>
<span class="o">}</span>
</code></pre>
</div>

<p>Output:</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">Here</span>
<span class="n">INSTANCE</span>
</code></pre>
</div>

<h2 id="ref">Ref</h2>

<ul>
  <li><a href="https://en.wikipedia.org/wiki/Singleton_pattern">Wiki</a></li>
  <li><a href="http://www.ibm.com/developerworks/library/j-dcl/">Double-checked locking and the Singleton pattern</a></li>
  <li><a href="http://www.javamex.com/tutorials/synchronization_volatile.shtml">Volatile</a></li>
  <li><a href="http://www.cnblogs.com/java-my-life/archive/2012/03/31/2425631.html">单例模式</a></li>
  <li><a href="http://stackoverflow.com/questions/26285520/implementing-singleton-with-an-enum-in-java">Stackover - Enum for singleton</a></li>
</ul>


            </article>
            
            <div class="share">
                <div class="share-component"></div>
            </div>
            
            
            <div class="comment">
                
  
      
          <div id="disqus_thread"></div>
          <script>
            var disqus_config = function () {
              this.page=this.page||{};
              this.page.url = document.location.href.replace(document.location.host,'zale.site');
              this.page.identifier = '/articles/2015/09/Singleton.html';
              this.page.title = 'Singleton Pattern';
            };
            (function() { // DON'T EDIT BELOW THIS LINE
              var d = document, s = d.createElement('script');

              s.type = 'text/javascript';
              s.async = true;
              var shortname = 'zale';

              s.src = '//' + shortname + '.disqus.com/embed.js';

              s.setAttribute('data-timestamp', +new Date());
              (d.head || d.body).appendChild(s);
            })();
          </script>
          <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

      
    

            </div>
            
        </div>
        <div class="column one-fourth">
            
<h3>Search</h3>
<form action="get" id="site_search">
    <input type="text" id="search_box" placeholder="Search">
    <button class="btn btn-default" type="submit"><span class="octicon octicon-search"></span></button>
</form>

<ul id="search_results"></ul>

<link rel="stylesheet" type="text/css" href="/assets/css/modules/sidebar-search.css">


            <h3>Directory</h3>
<div id="post-directory-module">
    <section class="post-directory">
        <!-- Links that trigger the jumping -->
        <!-- Added by javascript below -->
        <dl></dl>
    </section>
</div>

<script type="text/javascript">

    $(document).ready(function () {
        $("article h2").each(function (index) {
            $(".post-directory dl").append("<dt><a class=\"jumper\" href=#" +
                    $(this).attr("id")
                    + ">"
                    + $(this).text()
                    + "</a></dt>");

            var children = $(this).nextUntil("h2", "h3");

            children.each(function (index) {
                $(".post-directory dl").append("<dd><a class=\"jumper\" href=#" +
                        $(this).attr("id")
                        + ">"
                        + "&nbsp;&nbsp;- " + $(this).text()
                        + "</a></dd>");
            });
        });

        //排除小设备下的fixed布局
        if ($(document).width() > parseFloat($('body').css('fontSize')) * 50) {

            var fixmeTop = $('#post-directory-module').offset().top - 80;       // get initial position of the element
            $(window).scroll(function () {                  // assign scroll event listener

                var currentScroll = $(window).scrollTop(); // get current position

                if (currentScroll >= fixmeTop) {           // apply position: fixed if you
                    $('#post-directory-module').css({                      // scroll to that element or below it
                        top: '80px',
                        position: 'fixed',
                    });
                } else {                                   // apply position: static
                    $('#post-directory-module').css({                      // if you scroll above it
                        position: 'inherit',
                    });
                }
            });
        }
        $('#post-directory-module a').parent().click(function ($event) {
            $(this).find('a').click();
        });
    });


</script>
        </div>
    </div>
</section>
<!-- /section.content -->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
tex2jax: {
  inlineMath: [['$','$'], ['\\(','\\)']]
  }
});
</script>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    <footer class="container">
        <div class="site-footer" role="contentinfo">
            <div class="copyright left mobile-block">
                    © 2015
                    <span title="Zale">Zale</span>
                    <a href="javascript:$('body, html').animate({scrollTop: 0}, 600)" class="right mobile-visible">TOP</a>
            </div>

            <ul class="site-footer-links right mobile-hidden">
                <li>
                    <a href="javascript:$('body, html').animate({scrollTop: 0}, 600)" >TOP</a>
                </li>
            </ul>
            <a href="https://github.com/zl810881283/zl810881283.github.io" target="_blank" aria-label="view source code">
                <span class="mega-octicon octicon-mark-github" title="GitHub"></span>
            </a>
            <ul class="site-footer-links mobile-hidden">
                
                <li>
                    <a href="/" title="Home" target="">Home</a>
                </li>
                
                <li>
                    <a href="/categories" title="Categories" target="">Categories</a>
                </li>
                
                <li>
                    <a href="/wiki" title="Wiki" target="">Wiki</a>
                </li>
                
                <li>
                    <a href="/bookmark" title="Bookmark" target="">Bookmark</a>
                </li>
                
                <li>
                    <a href="/open-source" title="Open-source" target="">Open-source</a>
                </li>
                
                <li>
                    <a href="/about" title="About" target="">About</a>
                </li>
                
                <li><a href="/feed.xml"><span class="octicon octicon-rss" style="color:orange;"></span></a></li>
            </ul>

        </div>
    </footer>
    <script>
      jQuery(document).ready(function($) {
        // geopattern
        $('.geopattern').each(function(){
          $(this).geopattern($(this).data('pattern-id'));
        });
       // hljs.initHighlightingOnLoad();
      });
    </script>
    
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-76860417-1', 'auto');
        ga('send', 'pageview');

    </script>

    
    <script src="/assets/js/hashchange.js"></script>
    </body>
</html>
