<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <title>Spring Beans Autowire &mdash; Zale - Zale's Blog 张乐博客 个人网站</title>

    <!-- Latest compiled and minified CSS -->
    

    
    <link rel="alternate" type="application/atom+xml" title="overtrue" href="/atom.xml">

    <link rel="apple-touch-icon-precomposed" href="/assets/images/apple-touch-icon-57x57-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/assets/images/apple-touch-icon-72x72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/assets/images/apple-touch-icon-114x114-precomposed.png">
    
    <meta property="og:title" content="Spring Beans Autowire">
      
    <meta name="keywords" content="Zale, 张乐, blog, 博客, ZhangLe, 个人网站">
    <meta name="og:keywords" content="Zale, 张乐, blog, 博客, ZhangLe, 个人网站">
      
    <meta name="description" content="This is quick note after learning Spring autowire.">
    <meta name="og:description" content="This is quick note after learning Spring autowire.">
      
    
    
        
    
    <meta property="og:url" content="//articles/2016/02/Spring-Beans-Autowire.html">
    <meta property="og:site_name" content="zale.site">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="zh_CN" />
    
    <meta property="article:published_time" content="2016-02-25">
    

    <!-- Favicon Icon -->
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
    <!-- 3rd party css -->


    <link rel="stylesheet" href="/bower_components/octicons/octicons/octicons.css">
    <link rel="stylesheet" href="/bower_components/Trip.js/dist/trip.min.css">
    <link rel="stylesheet" href="/bower_components/flag-icon-css/css/flag-icon.css" >
    <link rel="stylesheet" href="/bower_components/share.js/dist/css/share.min.css">
    <link rel="stylesheet" href="/bower_components/primer-css/css/primer.css">
    <link rel="stylesheet" href="/bower_components/primer-markdown/dist/user-content.min.css">

    <!-- custom css-->
    <link rel="stylesheet" href="/assets/css/components/collection.css">
    <link rel="stylesheet" href="/assets/css/components/repo-card.css">
    <link rel="stylesheet" href="/assets/css/sections/repo-list.css">
    <link rel="stylesheet" href="/assets/css/sections/mini-repo-list.css">
    <link rel="stylesheet" href="/assets/css/components/boxed-group.css">
    <link rel="stylesheet" href="/assets/css/globals/common.css">
    <link rel="stylesheet" href="/assets/css/posts/index.css">
    <link rel="stylesheet" href="/assets/css/pages/index.css">
    <link rel="stylesheet" href="/assets/css/pages/hover-min.css">
    <link rel="stylesheet" href="/assets/css/globals/prism.css">
    <link rel="stylesheet" href="/assets/css/globals/responsive.css">


    <!-- 3rd party scripts -->
    <script src="/bower_components/jquery/dist/jquery.min.js"></script>
    <script src="/bower_components/jquery-ui/jquery-ui.min.js"></script>
    <script src="/bower_components/Trip.js/dist/trip.min.js"></script>
    <script src="/bower_components/share.js/dist/js/share.min.js"></script>

    <!-- custom scripts-->
    <script src="/assets/js/index.js"></script>
    <script src="/assets/js/geopattern.js"></script>
    <script src="/assets/js/prism.js"></script>
    <script src="/assets/js/lunr.min.js"></script>
    <script src="/assets/js/search.js"></script>


    

</head>
<body class="">
    <header class="site-header" id="site-header-id">
        <div class="container">
            <h1><a href="/" title="Zale"><span class="octicon octicon-mark-github"></span> Zale</a></h1>
            <nav class="site-header-nav" role="navigation">
                
                <a href="/" class=" site-header-nav-item hvr-underline-from-center" target="" title="Home">Home</a>
                
                <a href="/categories" class=" site-header-nav-item hvr-underline-from-center" target="" title="Categories">Categories</a>
                
                <a href="/wiki" class=" site-header-nav-item hvr-underline-from-center" target="" title="Wiki">Wiki</a>
                
                <a href="/bookmark" class=" site-header-nav-item hvr-underline-from-center" target="" title="Bookmark">Bookmark</a>
                
                <a href="/open-source" class=" site-header-nav-item hvr-underline-from-center" target="" title="Open-source">Open-source</a>
                
                <a href="/about" class=" site-header-nav-item hvr-underline-from-center" target="" title="About">About</a>
                
            </nav>
        </div>
    </header>
    <!-- / header -->
    <section class="collection-head collection-head-scrolled geopattern" data-pattern-id="Spring Beans Au">
    <div class="container">
        <div class="columns">
            <div class="column">
                <div class="collection-title">
                    <h1 class="collection-header">Spring Beans Autowire</h1>
                    <div class="collection-info">
                        <span class="meta-info">
                            
                            
                                <span class="octicon octicon-calendar"></span> 2016/02/25
                            
                        </span>
                        
                          <span class="meta-info">
                            <span class="octicon octicon-file-directory"></span>
                            <a href="/categories#spring" title="Spring">Spring</a>
                          </span>
                        
                        
                        <span class="meta-info">
                            <span class="octicon octicon-tag"></span>
                            
                            <a href="/tags#spring" title="Spring">Spring</a>
                            
                        </span>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- / .banner -->
<section class="container content">
    <div class="columns">
        <div class="column three-fourths" >
            <article class="article-content markdown-body">
                <p>This is quick note after learning Spring autowire.</p>

<h2 id="autowire">Autowire</h2>

<p>Instead of using <code class="highlighter-rouge">&lt;constructor-arg&gt;</code> and <code class="highlighter-rouge">&lt;property&gt;</code> elements in XML configuration file to declare relationships between beans. We could using <strong>autowire</strong> which <strong>helps cut down on the amount of XML configuration</strong> for a big Spring based application. But for many large applications, it is also discouraged to use autowiring because <strong>it removes the transparency and the structure from collaborating classes</strong>.</p>

<p>There are mainly four types:</p>

<ul>
  <li>byName</li>
  <li>byType</li>
  <li>construtor</li>
  <li>autodetect</li>
</ul>

<h3 id="byname">byName</h3>

<p><strong>Autowiring by property name</strong>. Spring container looks at the properties of the beans on which autowire attribute is set to byName in the XML configuration file. It then tries to match and wire its properties with the beans defined by the same names in the configuration file.</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Test</span> <span class="o">{</span>  

    <span class="kd">private</span> <span class="n">TestBean</span> <span class="n">testBean</span><span class="o">;</span> 
    <span class="c1">// Autowire by name 'testBean', so the bean id should be testBean. </span>
    <span class="c1">// But in fact, it searches by setter name setTestBean() removing 'set' </span>
    <span class="c1">// prefix and lowercase the first character, so 'testBean'</span>
      
    <span class="c1">// Getter and setter</span>
<span class="o">}</span>
</code></pre>
</div>

<p>Then in XML configuration, spring container finds a bean with id <code class="highlighter-rouge">testBean</code>.</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"testBean"</span> <span class="na">class=</span><span class="s">"com.dong.TestBean"</span><span class="nt">/&gt;</span>  
<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"test"</span> <span class="na">class=</span><span class="s">"com.dong.test"</span> <span class="na">autowire=</span><span class="s">"byName"</span><span class="nt">/&gt;</span>
</code></pre>
</div>

<p>We could in the mean time <strong>using <code class="highlighter-rouge">&lt;propery ref='xxx' ...</code> to override the value from autowiring by name</strong>.</p>

<h3 id="bytype">byType</h3>

<p><strong>Autowiring by property datatype</strong>. Spring container looks at the properties of the beans on which autowire attribute is set to byType in the XML configuration file. It then tries to match and wire a property if its type matches with exactly one of the beans name in configuration file. <strong>If more than one such beans exists, a fatal exception is thrown.</strong></p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Test</span> <span class="o">{</span>  

    <span class="kd">private</span> <span class="n">TestBean</span> <span class="n">testBean</span><span class="o">;</span> 
    <span class="c1">// Autowire by type, so spring container searches type 'TestBean'. </span>
    <span class="c1">// But in fact, it searches in setTestBean(TestBean testBean) to </span>
    <span class="c1">// find 'TestBean' datatype.</span>
      
    <span class="c1">// Getter and setter</span>
<span class="o">}</span>
</code></pre>
</div>

<p>Then in XML configuration, spring container finds a bean with type <code class="highlighter-rouge">TestBean</code>.</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"testBean"</span> <span class="na">class=</span><span class="s">"com.dong.TestBean"</span><span class="nt">/&gt;</span>  
<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"test"</span> <span class="na">class=</span><span class="s">"com.dong.test"</span> <span class="na">autowire=</span><span class="s">"byType"</span><span class="nt">/&gt;</span>  
</code></pre>
</div>

<p>We could in the mean time <strong>using <code class="highlighter-rouge">&lt;propery ref='xxx' ...</code> to override the value from autowiring by type</strong>.</p>

<h3 id="construtor">construtor</h3>

<p><strong>Similar as byType, but type applies to constructor arguments</strong>. If there is not exactly one bean of the constructor argument type in the container, a fatal error is raised.</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Test</span> <span class="o">{</span>  

    <span class="kd">private</span> <span class="n">TestBean</span> <span class="n">testBean</span><span class="o">;</span> 

    <span class="kd">public</span> <span class="n">Test</span><span class="o">(</span><span class="n">TestBean</span> <span class="n">testBean</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// do stuff</span>
    <span class="o">}</span> 
    <span class="c1">// Autowire by constructor, so spring container searches type 'TestBean' in constructor</span>

    <span class="c1">// Getter and setter</span>
<span class="o">}</span>
</code></pre>
</div>

<p>Then in XML configuration, spring container finds a bean with id <code class="highlighter-rouge">testBean</code>.</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"testBean"</span> <span class="na">class=</span><span class="s">"com.dong.TestBean"</span><span class="nt">/&gt;</span>  
<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"test"</span> <span class="na">class=</span><span class="s">"com.dong.test"</span> <span class="na">autowire=</span><span class="s">"constructor"</span><span class="nt">/&gt;</span>
</code></pre>
</div>

<p>Unlike byType and byName using <code class="highlighter-rouge">&lt;propery ref='xxx' ...</code> to override, <code class="highlighter-rouge">&lt;constructor-args ..&gt;</code> can not mix with autowire</p>

<h3 id="autodetect">autodetect</h3>

<p>Spring automatically detects which type to use. <strong>It firstly tries to autowire by constructor, if it does not work, Spring tries to autowire by byType.</strong></p>

<h2 id="autowire-mixed-with-ref">autowire mixed with ref</h2>

<p><strong>If <code class="highlighter-rouge">autowire</code> mixed with <code class="highlighter-rouge">ref</code>, <code class="highlighter-rouge">ref</code> will override <code class="highlighter-rouge">autowire</code></strong></p>

<h2 id="default-autowire">default-autowire</h2>

<p>We could use <code class="highlighter-rouge">default-autowire</code> on <code class="highlighter-rouge">&lt;beans&gt;&lt;/beans&gt;</code> instead of repeating autowire type setting on each bean:</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;beans</span> <span class="na">default-autowire=</span><span class="s">"byType"</span> <span class="err">.....</span><span class="nt">&gt;</span> 
</code></pre>
</div>

<p>For the beans including in <code class="highlighter-rouge">&lt;beans&gt;&lt;/beans&gt;</code> , we could ovrride it by setting autowire type explicitly:</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;beans</span> <span class="na">default-autowire=</span><span class="s">"byType"</span> <span class="err">.....</span><span class="nt">&gt;</span> 

	<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"testBean"</span> <span class="na">class=</span><span class="s">"com.dong.TestBean"</span><span class="nt">/&gt;</span>  
	<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"test"</span> <span class="na">class=</span><span class="s">"com.dong.test"</span> <span class="na">autowire=</span><span class="s">"constructor"</span><span class="nt">/&gt;</span>

	// Other beans

<span class="nt">&lt;/beans&gt;</span>
</code></pre>
</div>

<h2 id="autowire-candidate">autowire-candidate</h2>

<p>We could use <code class="highlighter-rouge">autowire-candidate</code> to <strong>exclude a bean from autowiring</strong>. By default, all the beans have <code class="highlighter-rouge">autowire-candidate</code> with true value implicitly. So we need to set it to false to exclude this bean.</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;beans</span> <span class="na">default-autowire=</span><span class="s">"byType"</span> <span class="err">.....</span><span class="nt">&gt;</span> 

	<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"testBean"</span> <span class="na">class=</span><span class="s">"com.dong.TestBean"</span><span class="nt">/&gt;</span>
	<span class="c">&lt;!-- Set autowire-candidate to false, so it will never be considered for autowiring--&gt;</span>
	<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"testBadBean"</span> <span class="na">class=</span><span class="s">"com.dong.TestBean"</span> <span class="na">autowire-candidate=</span><span class="s">"false"</span><span class="nt">/&gt;</span>

	<span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">"test"</span> <span class="na">class=</span><span class="s">"com.dong.test"</span> <span class="na">autowire=</span><span class="s">"constructor"</span><span class="nt">/&gt;</span>

	// Other beans

<span class="nt">&lt;/beans&gt;</span>
</code></pre>
</div>

<h2 id="ref">Ref</h2>

<p><a href="http://www.tutorialspoint.com/spring/spring_beans_autowiring.htm">Tutorialspoint - Autowiring</a>
<a href="http://docs.spring.io/spring/docs/current/spring-framework-reference/html/beans.html#beans-factory-autowire">Spring Reference</a>
<a href="https://examples.javacodegeeks.com/enterprise-java/spring/beans-spring/spring-autowire-example/">Javacodegeeks - spring-autowire-example</a></p>


            </article>
            
            <div class="share">
                <div class="share-component"></div>
            </div>
            
            
            <div class="comment">
                
  
      
          <div id="disqus_thread"></div>
          <script>
            var disqus_config = function () {
              this.page=this.page||{};
              this.page.url = document.location.href.replace(document.location.host,'zale.site');
              this.page.identifier = '/articles/2016/02/Spring-Beans-Autowire.html';
              this.page.title = 'Spring Beans Autowire';
            };
            (function() { // DON'T EDIT BELOW THIS LINE
              var d = document, s = d.createElement('script');

              s.type = 'text/javascript';
              s.async = true;
              var shortname = 'zale';

              s.src = '//' + shortname + '.disqus.com/embed.js';

              s.setAttribute('data-timestamp', +new Date());
              (d.head || d.body).appendChild(s);
            })();
          </script>
          <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

      
    

            </div>
            
        </div>
        <div class="column one-fourth">
            
<h3>Search</h3>
<form action="get" id="site_search">
    <input type="text" id="search_box" placeholder="Search">
    <button class="btn btn-default" type="submit"><span class="octicon octicon-search"></span></button>
</form>

<ul id="search_results"></ul>

<link rel="stylesheet" type="text/css" href="/assets/css/modules/sidebar-search.css">


            <h3>Directory</h3>
<div id="post-directory-module">
    <section class="post-directory">
        <!-- Links that trigger the jumping -->
        <!-- Added by javascript below -->
        <dl></dl>
    </section>
</div>

<script type="text/javascript">

    $(document).ready(function () {
        $("article h2").each(function (index) {
            $(".post-directory dl").append("<dt><a class=\"jumper\" href=#" +
                    $(this).attr("id")
                    + ">"
                    + $(this).text()
                    + "</a></dt>");

            var children = $(this).nextUntil("h2", "h3");

            children.each(function (index) {
                $(".post-directory dl").append("<dd><a class=\"jumper\" href=#" +
                        $(this).attr("id")
                        + ">"
                        + "&nbsp;&nbsp;- " + $(this).text()
                        + "</a></dd>");
            });
        });

        //排除小设备下的fixed布局
        if ($(document).width() > parseFloat($('body').css('fontSize')) * 50) {

            var fixmeTop = $('#post-directory-module').offset().top - 80;       // get initial position of the element
            $(window).scroll(function () {                  // assign scroll event listener

                var currentScroll = $(window).scrollTop(); // get current position

                if (currentScroll >= fixmeTop) {           // apply position: fixed if you
                    $('#post-directory-module').css({                      // scroll to that element or below it
                        top: '80px',
                        position: 'fixed',
                    });
                } else {                                   // apply position: static
                    $('#post-directory-module').css({                      // if you scroll above it
                        position: 'inherit',
                    });
                }
            });
        }
        $('#post-directory-module a').parent().click(function ($event) {
            $(this).find('a').click();
        });
    });


</script>
        </div>
    </div>
</section>
<!-- /section.content -->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
tex2jax: {
  inlineMath: [['$','$'], ['\\(','\\)']]
  }
});
</script>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    <footer class="container">
        <div class="site-footer" role="contentinfo">
            <div class="copyright left mobile-block">
                    © 2015
                    <span title="Zale">Zale</span>
                    <a href="javascript:$('body, html').animate({scrollTop: 0}, 600)" class="right mobile-visible">TOP</a>
            </div>

            <ul class="site-footer-links right mobile-hidden">
                <li>
                    <a href="javascript:$('body, html').animate({scrollTop: 0}, 600)" >TOP</a>
                </li>
            </ul>
            <a href="https://github.com/zl810881283/zl810881283.github.io" target="_blank" aria-label="view source code">
                <span class="mega-octicon octicon-mark-github" title="GitHub"></span>
            </a>
            <ul class="site-footer-links mobile-hidden">
                
                <li>
                    <a href="/" title="Home" target="">Home</a>
                </li>
                
                <li>
                    <a href="/categories" title="Categories" target="">Categories</a>
                </li>
                
                <li>
                    <a href="/wiki" title="Wiki" target="">Wiki</a>
                </li>
                
                <li>
                    <a href="/bookmark" title="Bookmark" target="">Bookmark</a>
                </li>
                
                <li>
                    <a href="/open-source" title="Open-source" target="">Open-source</a>
                </li>
                
                <li>
                    <a href="/about" title="About" target="">About</a>
                </li>
                
                <li><a href="/feed.xml"><span class="octicon octicon-rss" style="color:orange;"></span></a></li>
            </ul>

        </div>
    </footer>
    <script>
      jQuery(document).ready(function($) {
        // geopattern
        $('.geopattern').each(function(){
          $(this).geopattern($(this).data('pattern-id'));
        });
       // hljs.initHighlightingOnLoad();
      });
    </script>
    
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-76860417-1', 'auto');
        ga('send', 'pageview');

    </script>

    
    <script src="/assets/js/hashchange.js"></script>
    </body>
</html>
